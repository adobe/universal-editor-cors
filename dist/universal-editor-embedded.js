/*
 * Copyright 2024 Adobe. All rights reserved.
 * This file is licensed to you under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License. You may obtain a copy
 * of the License at http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS
 * OF ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 */

(()=>{let e;(l=p||(p={})).Call="call",l.Reply="reply",l.Syn="syn",l.SynAck="synAck",l.Ack="ack",(u=h||(h={})).Fulfilled="fulfilled",u.Rejected="rejected",(c=m||(m={})).ConnectionDestroyed="ConnectionDestroyed",c.ConnectionTimeout="ConnectionTimeout",c.NoIframeSrc="NoIframeSrc",(f||(f={})).DataCloneError="DataCloneError",(y||(y={})).Message="message";var t,r,a,n,i,s,o,d,l,u,c,p,h,m,f,y,v,g,_,E,b,x,T,k,w,N;let O=({name:e,message:t,stack:r})=>({name:e,message:t,stack:r});let C=0;let R=e=>e?e.split("."):[],S=(e,t,r)=>{let a=R(t);return a.reduce(((e,t,n)=>(void 0===e[t]&&(e[t]={}),n===a.length-1&&(e[t]=r),e[t])),e),e},I=(e,t)=>{let r={};return Object.keys(e).forEach((a=>{let n=e[a],i=((e,t)=>{let r=R(t||"");return r.push(e),(e=>e.join("."))(r)})(a,t);"object"==typeof n&&Object.assign(r,I(n,i)),"function"==typeof n&&(r[i]=n)})),r};var Z=(e,t,r,a,n)=>{let{localName:i,local:s,remote:o,originForSending:d,originForReceiving:l}=t,u=!1;n(`${i}: Connecting call sender`);let c=e=>(...t)=>{let r;n(`${i}: Sending ${e}() call`);try{o.closed&&(r=!0)}catch(e){r=!0}if(r&&a(),u){let t=Error(`Unable to send ${e}() call due to destroyed connection`);throw t.code=m.ConnectionDestroyed,t}return new Promise(((r,a)=>{let u=++C,c=t=>{if(t.source!==o||t.data.penpal!==p.Reply||t.data.id!==u)return;if("*"!==l&&t.origin!==l)return void n(`${i} received message from origin ${t.origin} which did not match expected origin ${l}`);let d=t.data;n(`${i}: Received ${e}() reply`),s.removeEventListener(y.Message,c);let m=d.returnValue;d.returnValueIsError&&(m=(e=>{let t=Error();return Object.keys(e).forEach((r=>t[r]=e[r])),t})(m)),(d.resolution===h.Fulfilled?r:a)(m)};s.addEventListener(y.Message,c);let m={penpal:p.Call,id:u,methodName:e,args:t};o.postMessage(m,d)}))};return Object.assign(e,(e=>{let t={};for(let r in e)S(t,r,e[r]);return t})(r.reduce(((e,t)=>(e[t]=c(t),e)),{}))),()=>{u=!0}},A=(e,t,r,a)=>{let{destroy:n,onDestroy:i}=r;return r=>{if(!(e instanceof RegExp?e.test(r.origin):"*"===e||e===r.origin))return void a(`Child: Handshake - Received SYN-ACK from origin ${r.origin} which did not match expected origin ${e}`);a("Child: Handshake - Received SYN-ACK, responding with ACK");let s="null"===r.origin?"*":r.origin,o={penpal:p.Ack,methodNames:Object.keys(t)};window.parent.postMessage(o,s);let d={localName:"Child",local:window,remote:window.parent,originForSending:s,originForReceiving:r.origin};i(((e,t,r)=>{let{localName:a,local:n,remote:i,originForSending:s,originForReceiving:o}=e,d=!1,l=e=>{if(e.source!==i||e.data.penpal!==p.Call)return;if("*"!==o&&e.origin!==o)return void r(`${a} received message from origin ${e.origin} which did not match expected origin ${o}`);let{methodName:n,args:l,id:u}=e.data;r(`${a}: Received ${n}() call`);let c=e=>t=>{if(r(`${a}: Sending ${n}() reply`),d)return void r(`${a}: Unable to send ${n}() reply due to destroyed connection`);let o={penpal:p.Reply,id:u,resolution:e,returnValue:t};e===h.Rejected&&t instanceof Error&&(o.returnValue=O(t),o.returnValueIsError=!0);try{i.postMessage(o,s)}catch(e){if(e.name===f.DataCloneError){let t={penpal:p.Reply,id:u,resolution:h.Rejected,returnValue:O(e),returnValueIsError:!0};i.postMessage(t,s)}throw e}};new Promise((e=>e(t[n].apply(t,l)))).then(c(h.Fulfilled),c(h.Rejected))};return n.addEventListener(y.Message,l),()=>{d=!0,n.removeEventListener(y.Message,l)}})(d,t,a));let l={};return i(Z(l,d,r.data.methodNames,n,a)),l}};var P=(e={})=>{let{parentOrigin:t="*",methods:r={},timeout:a,debug:n=!1}=e,i=(e=>(...t)=>{e&&console.log("[Penpal]",...t)})(n),s=((e,t)=>{let r=[],a=!1;return{destroy(n){a||(a=!0,t(`${e}: Destroying connection`),r.forEach((e=>{e(n)})))},onDestroy(e){a?e():r.push(e)}}})("Child",i),{destroy:o,onDestroy:d}=s,l=A(t,I(r),s,i),u=()=>{i("Child: Handshake - Sending SYN");let e={penpal:p.Syn};window.parent.postMessage(e,t instanceof RegExp?"*":t)};return{promise:new Promise(((e,t)=>{let r=((e,t)=>{let r;return void 0!==e&&(r=window.setTimeout((()=>{let r=Error(`Connection timed out after ${e}ms`);r.code=m.ConnectionTimeout,t(r)}),e)),()=>{clearTimeout(r)}})(a,o),n=t=>{if((()=>{try{clearTimeout()}catch(e){return!1}return!0})()&&t.source===parent&&t.data&&t.data.penpal===p.SynAck){let a=l(t);a&&(window.removeEventListener(y.Message,n),r(),e(a))}};window.addEventListener(y.Message,n),u(),d((e=>{window.removeEventListener(y.Message,n),e&&t(e)}))})),destroy(){o()}}};(t=v||(v={})).DRAFT="draft",t.PUBLISHED="published",t.UNPUBLISHED="unpublished",t.MODIFIED="modified",t.UNKNOWN="unknown",(r=g||(g={})).PAGE="page",r.CONTENT_FRAGMENT="content-fragment",r.EXPERIENCE_FRAGMENT="experience-fragment",r.ASSET="asset",r.TEMPLATE="template",r.POLICIES="policies",r.PRODUCT="product",r.CATALOG="catalog",r.TAG="tag",r.OTHERS="others";let $=Object.freeze({UUID:"id",RESOURCE:"resource",TYPE:"type",PROP:"prop",PARENTID:"parentid",BEHAVIOR:"behavior",LABEL:"label",MODEL:"model",FILTER:"filter"});(a=_||(_={})).EDIT="edit",a.PREVIEW="preview",(n=E||(E={})).TEXT="text",n.MEDIA="media",n.RICHTEXT="richtext",n.REFERENCE="reference",n.CONTAINER="container",n.COMPONENT="component",(i=b||(b={})).TEXT="text",i.MEDIA="media",i.RICHTEXT="richtext",i.REFERENCE="reference",i.CONTAINER="container",i.COMPONENT="component",Object.freeze({BLOCKS:"blocks",FORMAT:"format",ALIGNMENT:"alignment",INDENTATION:"indentation",SR_SCRIPT:"sr_script",LIST:"list",INSERT:"insert",ADVANCED:"advanced",EXTENSIONS:"extensions",EDITOR:"editor"}),(s=x||(x={})).assertEqual=e=>e,s.assertIs=function(e){},s.assertNever=function(e){throw Error()},s.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},s.getValidEnumValues=e=>{let t=s.objectKeys(e).filter((t=>"number"!=typeof e[e[t]])),r={};for(let a of t)r[a]=e[a];return s.objectValues(r)},s.objectValues=e=>s.objectKeys(e).map((function(t){return e[t]})),s.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},s.find=(e,t)=>{for(let r of e)if(t(r))return r},s.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,s.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},s.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(T||(T={})).mergeShapes=(e,t)=>({...e,...t});let j=x.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),M=e=>{switch(typeof e){case"undefined":return j.undefined;case"string":return j.string;case"number":return isNaN(e)?j.nan:j.number;case"boolean":return j.boolean;case"function":return j.function;case"bigint":return j.bigint;case"symbol":return j.symbol;case"object":return Array.isArray(e)?j.array:null===e?j.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?j.promise:"undefined"!=typeof Map&&e instanceof Map?j.map:"undefined"!=typeof Set&&e instanceof Set?j.set:"undefined"!=typeof Date&&e instanceof Date?j.date:j.object;default:return j.unknown}},L=x.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class D extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let t=e||function(e){return e.message},r={_errors:[]},a=e=>{for(let n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(a);else if("invalid_return_type"===n.code)a(n.returnTypeError);else if("invalid_arguments"===n.code)a(n.argumentsError);else if(0===n.path.length)r._errors.push(t(n));else{let e=r,a=0;for(;a<n.path.length;){let r=n.path[a];a===n.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(n))):e[r]=e[r]||{_errors:[]},e=e[r],a++}}};return a(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,x.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){let t={},r=[];for(let a of this.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):r.push(e(a));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}D.create=e=>new D(e);let U=(e,t)=>{let r;switch(e.code){case L.invalid_type:r=e.received===j.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case L.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,x.jsonStringifyReplacer)}`;break;case L.unrecognized_keys:r=`Unrecognized key(s) in object: ${x.joinValues(e.keys,", ")}`;break;case L.invalid_union:r="Invalid input";break;case L.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${x.joinValues(e.options)}`;break;case L.invalid_enum_value:r=`Invalid enum value. Expected ${x.joinValues(e.options)}, received '${e.received}'`;break;case L.invalid_arguments:r="Invalid function arguments";break;case L.invalid_return_type:r="Invalid function return type";break;case L.invalid_date:r="Invalid date";break;case L.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:x.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case L.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case L.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case L.custom:r="Invalid input";break;case L.invalid_intersection_types:r="Intersection results could not be merged";break;case L.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case L.not_finite:r="Number must be finite";break;default:r=t.defaultError,x.assertNever(e)}return{message:r}},V=U;function F(){return V}let z=e=>{let{data:t,path:r,errorMaps:a,issueData:n}=e,i=[...r,...n.path||[]],s={...n,path:i},o="";for(let e of a.filter((e=>!!e)).slice().reverse())o=e(s,{data:t,defaultError:o}).message;return{...n,path:i,message:n.message||o}};function K(e,t){let r=z({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,F(),U].filter((e=>!!e))});e.common.issues.push(r)}class q{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let a of t){if("aborted"===a.status)return B;"dirty"===a.status&&e.dirty(),r.push(a.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t)r.push({key:await e.key,value:await e.value});return q.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let a of t){let{key:t,value:n}=a;if("aborted"===t.status||"aborted"===n.status)return B;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==n.value||a.alwaysSet)&&(r[t.value]=n.value)}return{status:e.value,value:r}}}let B=Object.freeze({status:"aborted"}),W=e=>({status:"dirty",value:e}),H=e=>({status:"valid",value:e}),Y=e=>"aborted"===e.status,X=e=>"dirty"===e.status,G=e=>"valid"===e.status,J=e=>"undefined"!=typeof Promise&&e instanceof Promise;(o=k||(k={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},o.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;class Q{constructor(e,t,r,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let ee=(e,t)=>{if(G(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new D(e.common.issues);return this._error=t,this._error}}};function te(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:a,description:n}=e;if(t&&(r||a))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:n}:{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=a?a:t.defaultError}:{message:null!=r?r:t.defaultError},description:n}}class re{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return M(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:M(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new q,ctx:{common:e.parent.common,data:e.data,parsedType:M(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(J(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let a={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:M(e)},n=this._parseSync({data:e,path:a.path,parent:a});return ee(a,n)}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:M(e)},a=this._parse({data:e,path:r.path,parent:r});return ee(r,await(J(a)?a:Promise.resolve(a)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,a)=>{let n=e(t),i=()=>a.addIssue({code:L.custom,...r(t)});return"undefined"!=typeof Promise&&n instanceof Promise?n.then((e=>!!e||(i(),!1))):!!n||(i(),!1)}))}refinement(e,t){return this._refinement(((r,a)=>!!e(r)||(a.addIssue("function"==typeof t?t(r,a):t),!1)))}_refinement(e){return new Ue({schema:this,typeName:w.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Ve.create(this,this._def)}nullable(){return Fe.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Te.create(this,this._def)}promise(){return De.create(this,this._def)}or(e){return we.create([this,e],this._def)}and(e){return Ce.create(this,e,this._def)}transform(e){return new Ue({...te(this._def),schema:this,typeName:w.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new ze({...te(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:w.ZodDefault})}brand(){return new We({typeName:w.ZodBranded,type:this,...te(this._def)})}catch(e){return new Ke({...te(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:w.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return He.create(this,e)}readonly(){return Ye.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let ae=/^c[^\s-]{8,}$/i,ne=/^[a-z][a-z0-9]*$/,ie=/^[0-9A-HJKMNP-TV-Z]{26}$/,se=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,oe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,de=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,le=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ue=e=>e.precision?e.offset?RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}Z$`):0===e.precision?e.offset?RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):e.offset?RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");class ce extends re{_parse(t){let r;if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==j.string){let e=this._getOrReturnCtx(t);return K(e,{code:L.invalid_type,expected:j.string,received:e.parsedType}),B}let a=new q;for(let s of this._def.checks)if("min"===s.kind)t.data.length<s.value&&(K(r=this._getOrReturnCtx(t,r),{code:L.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),a.dirty());else if("max"===s.kind)t.data.length>s.value&&(K(r=this._getOrReturnCtx(t,r),{code:L.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),a.dirty());else if("length"===s.kind){let e=t.data.length>s.value,n=t.data.length<s.value;(e||n)&&(r=this._getOrReturnCtx(t,r),e?K(r,{code:L.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):n&&K(r,{code:L.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),a.dirty())}else if("email"===s.kind)oe.test(t.data)||(K(r=this._getOrReturnCtx(t,r),{validation:"email",code:L.invalid_string,message:s.message}),a.dirty());else if("emoji"===s.kind)e||(e=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),e.test(t.data)||(K(r=this._getOrReturnCtx(t,r),{validation:"emoji",code:L.invalid_string,message:s.message}),a.dirty());else if("uuid"===s.kind)se.test(t.data)||(K(r=this._getOrReturnCtx(t,r),{validation:"uuid",code:L.invalid_string,message:s.message}),a.dirty());else if("cuid"===s.kind)ae.test(t.data)||(K(r=this._getOrReturnCtx(t,r),{validation:"cuid",code:L.invalid_string,message:s.message}),a.dirty());else if("cuid2"===s.kind)ne.test(t.data)||(K(r=this._getOrReturnCtx(t,r),{validation:"cuid2",code:L.invalid_string,message:s.message}),a.dirty());else if("ulid"===s.kind)ie.test(t.data)||(K(r=this._getOrReturnCtx(t,r),{validation:"ulid",code:L.invalid_string,message:s.message}),a.dirty());else if("url"===s.kind)try{new URL(t.data)}catch(e){K(r=this._getOrReturnCtx(t,r),{validation:"url",code:L.invalid_string,message:s.message}),a.dirty()}else if("regex"===s.kind)s.regex.lastIndex=0,s.regex.test(t.data)||(K(r=this._getOrReturnCtx(t,r),{validation:"regex",code:L.invalid_string,message:s.message}),a.dirty());else if("trim"===s.kind)t.data=t.data.trim();else if("includes"===s.kind)t.data.includes(s.value,s.position)||(K(r=this._getOrReturnCtx(t,r),{code:L.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),a.dirty());else if("toLowerCase"===s.kind)t.data=t.data.toLowerCase();else if("toUpperCase"===s.kind)t.data=t.data.toUpperCase();else if("startsWith"===s.kind)t.data.startsWith(s.value)||(K(r=this._getOrReturnCtx(t,r),{code:L.invalid_string,validation:{startsWith:s.value},message:s.message}),a.dirty());else if("endsWith"===s.kind)t.data.endsWith(s.value)||(K(r=this._getOrReturnCtx(t,r),{code:L.invalid_string,validation:{endsWith:s.value},message:s.message}),a.dirty());else if("datetime"===s.kind)ue(s).test(t.data)||(K(r=this._getOrReturnCtx(t,r),{code:L.invalid_string,validation:"datetime",message:s.message}),a.dirty());else if("ip"===s.kind){var n,i;n=t.data,("v4"===(i=s.version)||!i)&&de.test(n)||("v6"===i||!i)&&le.test(n)||(K(r=this._getOrReturnCtx(t,r),{validation:"ip",code:L.invalid_string,message:s.message}),a.dirty())}else x.assertNever(s);return{status:a.value,value:t.data}}_regex(e,t,r){return this.refinement((t=>e.test(t)),{validation:t,code:L.invalid_string,...k.errToObj(r)})}_addCheck(e){return new ce({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...k.errToObj(e)})}url(e){return this._addCheck({kind:"url",...k.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...k.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...k.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...k.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...k.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...k.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...k.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...k.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...k.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...k.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...k.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...k.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...k.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...k.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...k.errToObj(t)})}nonempty(e){return this.min(1,k.errToObj(e))}trim(){return new ce({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ce({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ce({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}ce.create=e=>{var t;return new ce({checks:[],typeName:w.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...te(e)})};class pe extends re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==j.number){let t=this._getOrReturnCtx(e);return K(t,{code:L.invalid_type,expected:j.number,received:t.parsedType}),B}let r=new q;for(let a of this._def.checks)"int"===a.kind?x.isInteger(e.data)||(K(t=this._getOrReturnCtx(e,t),{code:L.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(K(t=this._getOrReturnCtx(e,t),{code:L.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(K(t=this._getOrReturnCtx(e,t),{code:L.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"multipleOf"===a.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,n=r>a?r:a;return parseInt(e.toFixed(n).replace(".",""))%parseInt(t.toFixed(n).replace(".",""))/Math.pow(10,n)}(e.data,a.value)&&(K(t=this._getOrReturnCtx(e,t),{code:L.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(K(t=this._getOrReturnCtx(e,t),{code:L.not_finite,message:a.message}),r.dirty()):x.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,k.toString(t))}gt(e,t){return this.setLimit("min",e,!1,k.toString(t))}lte(e,t){return this.setLimit("max",e,!0,k.toString(t))}lt(e,t){return this.setLimit("max",e,!1,k.toString(t))}setLimit(e,t,r,a){return new pe({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:k.toString(a)}]})}_addCheck(e){return new pe({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:k.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:k.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:k.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:k.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:k.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&x.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}pe.create=e=>new pe({checks:[],typeName:w.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...te(e)});class he extends re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==j.bigint){let t=this._getOrReturnCtx(e);return K(t,{code:L.invalid_type,expected:j.bigint,received:t.parsedType}),B}let r=new q;for(let a of this._def.checks)"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(K(t=this._getOrReturnCtx(e,t),{code:L.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(K(t=this._getOrReturnCtx(e,t),{code:L.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(K(t=this._getOrReturnCtx(e,t),{code:L.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):x.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,k.toString(t))}gt(e,t){return this.setLimit("min",e,!1,k.toString(t))}lte(e,t){return this.setLimit("max",e,!0,k.toString(t))}lt(e,t){return this.setLimit("max",e,!1,k.toString(t))}setLimit(e,t,r,a){return new he({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:k.toString(a)}]})}_addCheck(e){return new he({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:k.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}he.create=e=>{var t;return new he({checks:[],typeName:w.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...te(e)})};class me extends re{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==j.boolean){let t=this._getOrReturnCtx(e);return K(t,{code:L.invalid_type,expected:j.boolean,received:t.parsedType}),B}return H(e.data)}}me.create=e=>new me({typeName:w.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...te(e)});class fe extends re{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==j.date){let t=this._getOrReturnCtx(e);return K(t,{code:L.invalid_type,expected:j.date,received:t.parsedType}),B}if(isNaN(e.data.getTime()))return K(this._getOrReturnCtx(e),{code:L.invalid_date}),B;let r=new q;for(let a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(K(t=this._getOrReturnCtx(e,t),{code:L.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(K(t=this._getOrReturnCtx(e,t),{code:L.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):x.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new fe({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:k.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:k.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}fe.create=e=>new fe({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:w.ZodDate,...te(e)});class ye extends re{_parse(e){if(this._getType(e)!==j.symbol){let t=this._getOrReturnCtx(e);return K(t,{code:L.invalid_type,expected:j.symbol,received:t.parsedType}),B}return H(e.data)}}ye.create=e=>new ye({typeName:w.ZodSymbol,...te(e)});class ve extends re{_parse(e){if(this._getType(e)!==j.undefined){let t=this._getOrReturnCtx(e);return K(t,{code:L.invalid_type,expected:j.undefined,received:t.parsedType}),B}return H(e.data)}}ve.create=e=>new ve({typeName:w.ZodUndefined,...te(e)});class ge extends re{_parse(e){if(this._getType(e)!==j.null){let t=this._getOrReturnCtx(e);return K(t,{code:L.invalid_type,expected:j.null,received:t.parsedType}),B}return H(e.data)}}ge.create=e=>new ge({typeName:w.ZodNull,...te(e)});class _e extends re{constructor(){super(...arguments),this._any=!0}_parse(e){return H(e.data)}}_e.create=e=>new _e({typeName:w.ZodAny,...te(e)});class Ee extends re{constructor(){super(...arguments),this._unknown=!0}_parse(e){return H(e.data)}}Ee.create=e=>new Ee({typeName:w.ZodUnknown,...te(e)});class be extends re{_parse(e){let t=this._getOrReturnCtx(e);return K(t,{code:L.invalid_type,expected:j.never,received:t.parsedType}),B}}be.create=e=>new be({typeName:w.ZodNever,...te(e)});class xe extends re{_parse(e){if(this._getType(e)!==j.undefined){let t=this._getOrReturnCtx(e);return K(t,{code:L.invalid_type,expected:j.void,received:t.parsedType}),B}return H(e.data)}}xe.create=e=>new xe({typeName:w.ZodVoid,...te(e)});class Te extends re{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),a=this._def;if(t.parsedType!==j.array)return K(t,{code:L.invalid_type,expected:j.array,received:t.parsedType}),B;if(null!==a.exactLength){let e=t.data.length>a.exactLength.value,n=t.data.length<a.exactLength.value;(e||n)&&(K(t,{code:e?L.too_big:L.too_small,minimum:n?a.exactLength.value:void 0,maximum:e?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(null!==a.minLength&&t.data.length<a.minLength.value&&(K(t,{code:L.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),null!==a.maxLength&&t.data.length>a.maxLength.value&&(K(t,{code:L.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map(((e,r)=>a.type._parseAsync(new Q(t,e,t.path,r))))).then((e=>q.mergeArray(r,e)));let n=[...t.data].map(((e,r)=>a.type._parseSync(new Q(t,e,t.path,r))));return q.mergeArray(r,n)}get element(){return this._def.type}min(e,t){return new Te({...this._def,minLength:{value:e,message:k.toString(t)}})}max(e,t){return new Te({...this._def,maxLength:{value:e,message:k.toString(t)}})}length(e,t){return new Te({...this._def,exactLength:{value:e,message:k.toString(t)}})}nonempty(e){return this.min(1,e)}}Te.create=(e,t)=>new Te({type:e,minLength:null,maxLength:null,exactLength:null,typeName:w.ZodArray,...te(t)});class ke extends re{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=x.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==j.object){let t=this._getOrReturnCtx(e);return K(t,{code:L.invalid_type,expected:j.object,received:t.parsedType}),B}let{status:t,ctx:r}=this._processInputParams(e),{shape:a,keys:n}=this._getCached(),i=[];if(!(this._def.catchall instanceof be&&"strip"===this._def.unknownKeys))for(let e in r.data)n.includes(e)||i.push(e);let s=[];for(let e of n){let t=a[e],n=r.data[e];s.push({key:{status:"valid",value:e},value:t._parse(new Q(r,n,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof be){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of i)s.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)i.length>0&&(K(r,{code:L.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==e)throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of i){let a=r.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new Q(r,a,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then((async()=>{let e=[];for(let t of s){let r=await t.key;e.push({key:r,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>q.mergeObjectSync(t,e))):q.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return k.errToObj,new ke({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var a,n,i,s;let o=null!==(i=null===(n=(a=this._def).errorMap)||void 0===n?void 0:n.call(a,t,r).message)&&void 0!==i?i:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(s=k.errToObj(e).message)&&void 0!==s?s:o}:{message:o}}}:{}})}strip(){return new ke({...this._def,unknownKeys:"strip"})}passthrough(){return new ke({...this._def,unknownKeys:"passthrough"})}extend(e){return new ke({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ke({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:w.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ke({...this._def,catchall:e})}pick(e){let t={};return x.objectKeys(e).forEach((r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])})),new ke({...this._def,shape:()=>t})}omit(e){let t={};return x.objectKeys(this.shape).forEach((r=>{e[r]||(t[r]=this.shape[r])})),new ke({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof ke){let r={};for(let a in t.shape){let n=t.shape[a];r[a]=Ve.create(e(n))}return new ke({...t._def,shape:()=>r})}return t instanceof Te?new Te({...t._def,type:e(t.element)}):t instanceof Ve?Ve.create(e(t.unwrap())):t instanceof Fe?Fe.create(e(t.unwrap())):t instanceof Re?Re.create(t.items.map((t=>e(t)))):t}(this)}partial(e){let t={};return x.objectKeys(this.shape).forEach((r=>{let a=this.shape[r];e&&!e[r]?t[r]=a:t[r]=a.optional()})),new ke({...this._def,shape:()=>t})}required(e){let t={};return x.objectKeys(this.shape).forEach((r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof Ve;)e=e._def.innerType;t[r]=e}})),new ke({...this._def,shape:()=>t})}keyof(){return je(x.objectKeys(this.shape))}}ke.create=(e,t)=>new ke({shape:()=>e,unknownKeys:"strip",catchall:be.create(),typeName:w.ZodObject,...te(t)}),ke.strictCreate=(e,t)=>new ke({shape:()=>e,unknownKeys:"strict",catchall:be.create(),typeName:w.ZodObject,...te(t)}),ke.lazycreate=(e,t)=>new ke({shape:e,unknownKeys:"strip",catchall:be.create(),typeName:w.ZodObject,...te(t)});class we extends re{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map((async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then((function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map((e=>new D(e.ctx.common.issues)));return K(t,{code:L.invalid_union,unionErrors:r}),B}));{let e,a=[];for(let n of r){let r={...t,common:{...t.common,issues:[]},parent:null},i=n._parseSync({data:t.data,path:t.path,parent:r});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:r}),r.common.issues.length&&a.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let n=a.map((e=>new D(e)));return K(t,{code:L.invalid_union,unionErrors:n}),B}}get options(){return this._def.options}}we.create=(e,t)=>new we({options:e,typeName:w.ZodUnion,...te(t)});let Ne=e=>e instanceof Pe?Ne(e.schema):e instanceof Ue?Ne(e.innerType()):e instanceof $e?[e.value]:e instanceof Me?e.options:e instanceof Le?Object.keys(e.enum):e instanceof ze?Ne(e._def.innerType):e instanceof ve?[void 0]:e instanceof ge?[null]:null;class Oe extends re{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==j.object)return K(t,{code:L.invalid_type,expected:j.object,received:t.parsedType}),B;let r=this.discriminator,a=t.data[r],n=this.optionsMap.get(a);return n?t.common.async?n._parseAsync({data:t.data,path:t.path,parent:t}):n._parseSync({data:t.data,path:t.path,parent:t}):(K(t,{code:L.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),B)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let a=new Map;for(let r of t){let t=Ne(r.shape[e]);if(!t)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let n of t){if(a.has(n))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);a.set(n,r)}}return new Oe({typeName:w.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...te(r)})}}class Ce extends re{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),a=(e,a)=>{if(Y(e)||Y(a))return B;let n=function e(t,r){let a=M(t),n=M(r);if(t===r)return{valid:!0,data:t};if(a===j.object&&n===j.object){let a=x.objectKeys(r),n=x.objectKeys(t).filter((e=>-1!==a.indexOf(e))),i={...t,...r};for(let a of n){let n=e(t[a],r[a]);if(!n.valid)return{valid:!1};i[a]=n.data}return{valid:!0,data:i}}if(a===j.array&&n===j.array){if(t.length!==r.length)return{valid:!1};let a=[];for(let n=0;n<t.length;n++){let i=e(t[n],r[n]);if(!i.valid)return{valid:!1};a.push(i.data)}return{valid:!0,data:a}}return a===j.date&&n===j.date&&+t==+r?{valid:!0,data:t}:{valid:!1}}(e.value,a.value);return n.valid?((X(e)||X(a))&&t.dirty(),{status:t.value,value:n.data}):(K(r,{code:L.invalid_intersection_types}),B)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((([e,t])=>a(e,t))):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Ce.create=(e,t,r)=>new Ce({left:e,right:t,typeName:w.ZodIntersection,...te(r)});class Re extends re{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==j.array)return K(r,{code:L.invalid_type,expected:j.array,received:r.parsedType}),B;if(r.data.length<this._def.items.length)return K(r,{code:L.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),B;!this._def.rest&&r.data.length>this._def.items.length&&(K(r,{code:L.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let a=[...r.data].map(((e,t)=>{let a=this._def.items[t]||this._def.rest;return a?a._parse(new Q(r,e,r.path,t)):null})).filter((e=>!!e));return r.common.async?Promise.all(a).then((e=>q.mergeArray(t,e))):q.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new Re({...this._def,rest:e})}}Re.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new Re({items:e,typeName:w.ZodTuple,rest:null,...te(t)})};class Se extends re{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==j.object)return K(r,{code:L.invalid_type,expected:j.object,received:r.parsedType}),B;let a=[],n=this._def.keyType,i=this._def.valueType;for(let e in r.data)a.push({key:n._parse(new Q(r,e,r.path,e)),value:i._parse(new Q(r,r.data[e],r.path,e))});return r.common.async?q.mergeObjectAsync(t,a):q.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,r){return new Se(t instanceof re?{keyType:e,valueType:t,typeName:w.ZodRecord,...te(r)}:{keyType:ce.create(),valueType:e,typeName:w.ZodRecord,...te(t)})}}class Ie extends re{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==j.map)return K(r,{code:L.invalid_type,expected:j.map,received:r.parsedType}),B;let a=this._def.keyType,n=this._def.valueType,i=[...r.data.entries()].map((([e,t],i)=>({key:a._parse(new Q(r,e,r.path,[i,"key"])),value:n._parse(new Q(r,t,r.path,[i,"value"]))})));if(r.common.async){let e=new Map;return Promise.resolve().then((async()=>{for(let r of i){let a=await r.key,n=await r.value;if("aborted"===a.status||"aborted"===n.status)return B;("dirty"===a.status||"dirty"===n.status)&&t.dirty(),e.set(a.value,n.value)}return{status:t.value,value:e}}))}{let e=new Map;for(let r of i){let a=r.key,n=r.value;if("aborted"===a.status||"aborted"===n.status)return B;("dirty"===a.status||"dirty"===n.status)&&t.dirty(),e.set(a.value,n.value)}return{status:t.value,value:e}}}}Ie.create=(e,t,r)=>new Ie({valueType:t,keyType:e,typeName:w.ZodMap,...te(r)});class Ze extends re{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==j.set)return K(r,{code:L.invalid_type,expected:j.set,received:r.parsedType}),B;let a=this._def;null!==a.minSize&&r.data.size<a.minSize.value&&(K(r,{code:L.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),null!==a.maxSize&&r.data.size>a.maxSize.value&&(K(r,{code:L.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());let n=this._def.valueType;function i(e){let r=new Set;for(let a of e){if("aborted"===a.status)return B;"dirty"===a.status&&t.dirty(),r.add(a.value)}return{status:t.value,value:r}}let s=[...r.data.values()].map(((e,t)=>n._parse(new Q(r,e,r.path,t))));return r.common.async?Promise.all(s).then((e=>i(e))):i(s)}min(e,t){return new Ze({...this._def,minSize:{value:e,message:k.toString(t)}})}max(e,t){return new Ze({...this._def,maxSize:{value:e,message:k.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Ze.create=(e,t)=>new Ze({valueType:e,minSize:null,maxSize:null,typeName:w.ZodSet,...te(t)});class Ae extends re{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==j.function)return K(t,{code:L.invalid_type,expected:j.function,received:t.parsedType}),B;function r(e,r){return z({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,F(),U].filter((e=>!!e)),issueData:{code:L.invalid_arguments,argumentsError:r}})}function a(e,r){return z({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,F(),U].filter((e=>!!e)),issueData:{code:L.invalid_return_type,returnTypeError:r}})}let n={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof De){let e=this;return H((async function(...t){let s=new D([]),o=await e._def.args.parseAsync(t,n).catch((e=>{throw s.addIssue(r(t,e)),s})),d=await Reflect.apply(i,this,o);return await e._def.returns._def.type.parseAsync(d,n).catch((e=>{throw s.addIssue(a(d,e)),s}))}))}{let e=this;return H((function(...t){let s=e._def.args.safeParse(t,n);if(!s.success)throw new D([r(t,s.error)]);let o=Reflect.apply(i,this,s.data),d=e._def.returns.safeParse(o,n);if(!d.success)throw new D([a(o,d.error)]);return d.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ae({...this._def,args:Re.create(e).rest(Ee.create())})}returns(e){return new Ae({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new Ae({args:e||Re.create([]).rest(Ee.create()),returns:t||Ee.create(),typeName:w.ZodFunction,...te(r)})}}class Pe extends re{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Pe.create=(e,t)=>new Pe({getter:e,typeName:w.ZodLazy,...te(t)});class $e extends re{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return K(t,{received:t.data,code:L.invalid_literal,expected:this._def.value}),B}return{status:"valid",value:e.data}}get value(){return this._def.value}}function je(e,t){return new Me({values:e,typeName:w.ZodEnum,...te(t)})}$e.create=(e,t)=>new $e({value:e,typeName:w.ZodLiteral,...te(t)});class Me extends re{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return K(t,{expected:x.joinValues(r),received:t.parsedType,code:L.invalid_type}),B}if(-1===this._def.values.indexOf(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return K(t,{received:t.data,code:L.invalid_enum_value,options:r}),B}return H(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e){return Me.create(e)}exclude(e){return Me.create(this.options.filter((t=>!e.includes(t))))}}Me.create=je;class Le extends re{_parse(e){let t=x.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==j.string&&r.parsedType!==j.number){let e=x.objectValues(t);return K(r,{expected:x.joinValues(e),received:r.parsedType,code:L.invalid_type}),B}if(-1===t.indexOf(e.data)){let e=x.objectValues(t);return K(r,{received:r.data,code:L.invalid_enum_value,options:e}),B}return H(e.data)}get enum(){return this._def.values}}Le.create=(e,t)=>new Le({values:e,typeName:w.ZodNativeEnum,...te(t)});class De extends re{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==j.promise&&!1===t.common.async?(K(t,{code:L.invalid_type,expected:j.promise,received:t.parsedType}),B):H((t.parsedType===j.promise?t.data:Promise.resolve(t.data)).then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}De.create=(e,t)=>new De({type:e,typeName:w.ZodPromise,...te(t)});class Ue extends re{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===w.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),a=this._def.effect||null,n={addIssue:e=>{K(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(n.addIssue=n.addIssue.bind(n),"preprocess"===a.type){let e=a.transform(r.data,n);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:r.path,parent:r}))):this._def.schema._parseSync({data:e,path:r.path,parent:r})}if("refinement"===a.type){let e=e=>{let t=a.refinement(e,n);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((r=>"aborted"===r.status?B:("dirty"===r.status&&t.dirty(),e(r.value).then((()=>({status:t.value,value:r.value}))))));{let a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===a.status?B:("dirty"===a.status&&t.dirty(),e(a.value),{status:t.value,value:a.value})}}if("transform"===a.type){if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((e=>G(e)?Promise.resolve(a.transform(e.value,n)).then((e=>({status:t.value,value:e}))):e));{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!G(e))return e;let i=a.transform(e.value,n);if(i instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}}x.assertNever(a)}}Ue.create=(e,t,r)=>new Ue({schema:e,typeName:w.ZodEffects,effect:t,...te(r)}),Ue.createWithPreprocess=(e,t,r)=>new Ue({schema:t,effect:{type:"preprocess",transform:e},typeName:w.ZodEffects,...te(r)});class Ve extends re{_parse(e){return this._getType(e)===j.undefined?H(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ve.create=(e,t)=>new Ve({innerType:e,typeName:w.ZodOptional,...te(t)});class Fe extends re{_parse(e){return this._getType(e)===j.null?H(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Fe.create=(e,t)=>new Fe({innerType:e,typeName:w.ZodNullable,...te(t)});class ze extends re{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===j.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ze.create=(e,t)=>new ze({innerType:e,typeName:w.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...te(t)});class Ke extends re{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return J(a)?a.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new D(r.common.issues)},input:r.data})}))):{status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new D(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Ke.create=(e,t)=>new Ke({innerType:e,typeName:w.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...te(t)});class qe extends re{_parse(e){if(this._getType(e)!==j.nan){let t=this._getOrReturnCtx(e);return K(t,{code:L.invalid_type,expected:j.nan,received:t.parsedType}),B}return{status:"valid",value:e.data}}}qe.create=e=>new qe({typeName:w.ZodNaN,...te(e)});let Be=Symbol("zod_brand");class We extends re{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class He extends re{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?B:"dirty"===e.status?(t.dirty(),W(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?B:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new He({in:e,out:t,typeName:w.ZodPipeline})}}class Ye extends re{_parse(e){let t=this._def.innerType._parse(e);return G(t)&&(t.value=Object.freeze(t.value)),t}}Ye.create=(e,t)=>new Ye({innerType:e,typeName:w.ZodReadonly,...te(t)});let Xe=(e,t={},r)=>e?_e.create().superRefine(((a,n)=>{var i,s;if(!e(a)){let e="function"==typeof t?t(a):"string"==typeof t?{message:t}:t,o=null===(s=null!==(i=e.fatal)&&void 0!==i?i:r)||void 0===s||s;n.addIssue({code:"custom",..."string"==typeof e?{message:e}:e,fatal:o})}})):_e.create(),Ge={object:ke.lazycreate};(d=w||(w={})).ZodString="ZodString",d.ZodNumber="ZodNumber",d.ZodNaN="ZodNaN",d.ZodBigInt="ZodBigInt",d.ZodBoolean="ZodBoolean",d.ZodDate="ZodDate",d.ZodSymbol="ZodSymbol",d.ZodUndefined="ZodUndefined",d.ZodNull="ZodNull",d.ZodAny="ZodAny",d.ZodUnknown="ZodUnknown",d.ZodNever="ZodNever",d.ZodVoid="ZodVoid",d.ZodArray="ZodArray",d.ZodObject="ZodObject",d.ZodUnion="ZodUnion",d.ZodDiscriminatedUnion="ZodDiscriminatedUnion",d.ZodIntersection="ZodIntersection",d.ZodTuple="ZodTuple",d.ZodRecord="ZodRecord",d.ZodMap="ZodMap",d.ZodSet="ZodSet",d.ZodFunction="ZodFunction",d.ZodLazy="ZodLazy",d.ZodLiteral="ZodLiteral",d.ZodEnum="ZodEnum",d.ZodEffects="ZodEffects",d.ZodNativeEnum="ZodNativeEnum",d.ZodOptional="ZodOptional",d.ZodNullable="ZodNullable",d.ZodDefault="ZodDefault",d.ZodCatch="ZodCatch",d.ZodPromise="ZodPromise",d.ZodBranded="ZodBranded",d.ZodPipeline="ZodPipeline",d.ZodReadonly="ZodReadonly";let Je=ce.create,Qe=pe.create,et=qe.create,tt=he.create,rt=me.create,at=fe.create,nt=ye.create,it=ve.create,st=ge.create,ot=_e.create,dt=Ee.create,lt=be.create,ut=xe.create,ct=Te.create,pt=ke.create,ht=ke.strictCreate,mt=we.create,ft=Oe.create,yt=Ce.create,vt=Re.create,gt=Se.create,_t=Ie.create,Et=Ze.create,bt=Ae.create,xt=Pe.create,Tt=$e.create,kt=Me.create,wt=Le.create,Nt=De.create,Ot=Ue.create,Ct=Ve.create,Rt=Fe.create,St=Ue.createWithPreprocess,It=He.create;var Zt=Object.freeze({__proto__:null,defaultErrorMap:U,setErrorMap:function(e){V=e},getErrorMap:F,makeIssue:z,EMPTY_PATH:[],addIssueToContext:K,ParseStatus:q,INVALID:B,DIRTY:W,OK:H,isAborted:Y,isDirty:X,isValid:G,isAsync:J,get util(){return x},get objectUtil(){return T},ZodParsedType:j,getParsedType:M,ZodType:re,ZodString:ce,ZodNumber:pe,ZodBigInt:he,ZodBoolean:me,ZodDate:fe,ZodSymbol:ye,ZodUndefined:ve,ZodNull:ge,ZodAny:_e,ZodUnknown:Ee,ZodNever:be,ZodVoid:xe,ZodArray:Te,ZodObject:ke,ZodUnion:we,ZodDiscriminatedUnion:Oe,ZodIntersection:Ce,ZodTuple:Re,ZodRecord:Se,ZodMap:Ie,ZodSet:Ze,ZodFunction:Ae,ZodLazy:Pe,ZodLiteral:$e,ZodEnum:Me,ZodNativeEnum:Le,ZodPromise:De,ZodEffects:Ue,ZodTransformer:Ue,ZodOptional:Ve,ZodNullable:Fe,ZodDefault:ze,ZodCatch:Ke,ZodNaN:qe,BRAND:Be,ZodBranded:We,ZodPipeline:He,ZodReadonly:Ye,custom:Xe,Schema:re,ZodSchema:re,late:Ge,get ZodFirstPartyTypeKind(){return w},coerce:{string:e=>ce.create({...e,coerce:!0}),number:e=>pe.create({...e,coerce:!0}),boolean:e=>me.create({...e,coerce:!0}),bigint:e=>he.create({...e,coerce:!0}),date:e=>fe.create({...e,coerce:!0})},any:ot,array:ct,bigint:tt,boolean:rt,date:at,discriminatedUnion:ft,effect:Ot,enum:kt,function:bt,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Xe((t=>t instanceof e),t),intersection:yt,lazy:xt,literal:Tt,map:_t,nan:et,nativeEnum:wt,never:lt,null:st,nullable:Rt,number:Qe,object:pt,oboolean:()=>rt().optional(),onumber:()=>Qe().optional(),optional:Ct,ostring:()=>Je().optional(),pipeline:It,preprocess:St,promise:Nt,record:gt,set:Et,strictObject:ht,string:Je,symbol:nt,transformer:Ot,tuple:vt,undefined:it,union:mt,unknown:dt,void:ut,NEVER:B,ZodIssueCode:L,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:D});let At=Zt.enum(["0","1","2","3","4","5","6","7","8","9"]),Pt=Zt.enum(["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"]),$t=Zt.enum(["minus","equal","bracketleft","bracketright","backslash","semicolon","quote","comma","period","slash","backquote","enter","escape","backspace","tab","insert","home","end","pageup","pagedown","delete","arrowup","arrowdown","arrowleft","arrowright"]);Zt.union([At,Pt,$t]);let jt=Zt.enum(["shift+ctrl+","shift+alt+","shift+cmd+","ctrl+alt+","ctrl+cmd+","alt+cmd+","shift+ctrl+alt+","shift+ctrl+cmd+","shift+alt+cmd+","ctrl+alt+cmd+","shift+ctrl+alt+cmd+","shift+","ctrl+","alt+","cmd+",""]),Mt="urn:adobe:aue:",Lt=`meta[name^='${Mt}']`,Dt=`meta[name='${Mt}config:namespace']`,Ut=($.TYPE,{URN_PREFIX:Mt,META_SELECTOR:Lt,META_NAMESPACE:Dt,USER_INPUT_RELAY_MESSAGE:"REMOTE_APP_USER_INPUT",DEFAULT_PREFIX:"data-aue-",COMPONENT_ITEM_TYPE:"component",RTE_URL:"https://exc-unifiedcontent.experience.adobe.net/solutions/CQ-aem-headless-rte/assets/tinymce-681/js/tinymce/tinymce.min.js",EVENT_APP_INITIALIZED:"aue:initialized",EVENT_UI_SELECT:"aue:ui-select",EVENT_UI_PREVIEW:"aue:ui-preview",EVENT_UI_EDIT:"aue:ui-edit",EVENT_CONTENT_MOVE:"aue:content-move",EVENT_CONTENT_ADD:"aue:content-add",EVENT_CONTENT_PATCH:"aue:content-patch",EVENT_CONTENT_REMOVE:"aue:content-remove"});jt.options,At.options,Pt.options,$t.options;var Vt;function Ft(e,t,r){function a(){var l=Date.now()-o;l<t&&l>=0?n=setTimeout(a,t-l):(n=null,r||(d=e.apply(s,i),s=i=null))}null==t&&(t=100);var n,i,s,o,d,l=function(){s=this,i=arguments,o=Date.now();var l=r&&!n;return n||(n=setTimeout(a,t)),l&&(d=e.apply(s,i),s=i=null),d};return l.clear=function(){n&&(clearTimeout(n),n=null)},l.flush=function(){n&&(d=e.apply(s,i),s=i=null,clearTimeout(n),n=null)},l}Ft.debounce=Ft,Vt=Ft;var zt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;let Kt=[];for(let e=0;e<256;++e)Kt.push((e+256).toString(16).slice(1));function qt(e,t){return e<<t|e>>>32-t}let Bt=function(e,t,r){function a(e,t,r,a){var n;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof t&&(t=function(e){let t;if("string"!=typeof e||!zt.test(e))throw TypeError("Invalid UUID");let r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}(t)),16!==(null===(n=t)||void 0===n?void 0:n.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let i=new Uint8Array(16+e.length);if(i.set(t),i.set(e,t.length),(i=function(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){let t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let a=Math.ceil((e.length/4+2)/16),n=Array(a);for(let t=0;t<a;++t){let r=new Uint32Array(16);for(let a=0;a<16;++a)r[a]=e[64*t+4*a]<<24|e[64*t+4*a+1]<<16|e[64*t+4*a+2]<<8|e[64*t+4*a+3];n[t]=r}n[a-1][14]=8*(e.length-1)/4294967296,n[a-1][14]=Math.floor(n[a-1][14]),n[a-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<a;++e){let a=new Uint32Array(80);for(let t=0;t<16;++t)a[t]=n[e][t];for(let e=16;e<80;++e)a[e]=qt(a[e-3]^a[e-8]^a[e-14]^a[e-16],1);let i=r[0],s=r[1],o=r[2],d=r[3],l=r[4];for(let e=0;e<80;++e){let r=Math.floor(e/20),n=qt(i,5)+function(e,t,r,a){switch(e){case 0:return t&r^~t&a;case 1:case 3:return t^r^a;case 2:return t&r^t&a^r&a}}(r,s,o,d)+l+t[r]+a[e]>>>0;l=d,d=o,o=qt(s,30)>>>0,s=i,i=n}r[0]=r[0]+i>>>0,r[1]=r[1]+s>>>0,r[2]=r[2]+o>>>0,r[3]=r[3]+d>>>0,r[4]=r[4]+l>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}(i))[6]=15&i[6]|80,i[8]=63&i[8]|128,r){a=a||0;for(let e=0;e<16;++e)r[a+e]=i[e];return r}return function(e,t=0){return Kt[e[t+0]]+Kt[e[t+1]]+Kt[e[t+2]]+Kt[e[t+3]]+"-"+Kt[e[t+4]]+Kt[e[t+5]]+"-"+Kt[e[t+6]]+Kt[e[t+7]]+"-"+Kt[e[t+8]]+Kt[e[t+9]]+"-"+Kt[e[t+10]]+Kt[e[t+11]]+Kt[e[t+12]]+Kt[e[t+13]]+Kt[e[t+14]]+Kt[e[t+15]]}(i)}try{a.name="v5"}catch(e){}return a.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",a.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",a}(),Wt={element:window.document},Ht=0,Yt=(e=Ut.DEFAULT_PREFIX)=>{let t={};for(let r in $)t[r]=`${e}${$[r]}`;return t},Xt=(e,t)=>{var r;if(!(e&&e instanceof HTMLElement&&t))return"";let a="";return t===b.TEXT?a=e.textContent||e.innerText:t===b.RICHTEXT?a=e.innerHTML:t===b.MEDIA&&(a=null!==(r=e.getAttribute("src"))&&void 0!==r?r:""),a},Gt="OverlayBlockingElement",Jt=()=>{Qt(),(()=>{let e=document.createElement("div");e.id=Gt,e.style.cssText="\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 2147483647;",document.body.appendChild(e)})()},Qt=()=>{let e=document.getElementById(Gt);e&&e.remove()},er=Yt(),tr=new Map,rr=e=>{let t=e.closest(`[${er.RESOURCE}]`);return{cfid:(null==t?void 0:t.getAttribute(er.RESOURCE))||"",prop:(null==t?void 0:t.getAttribute(er.PROP))||""}},ar=(e,{resource:t,type:r,prop:a})=>{let n="",i="",s="";if(t){n=`[${er.RESOURCE}="${t}"]`;let r=(e=>{var t;let r=null===(t=e.parentElement)||void 0===t?void 0:t.closest(`[${er.TYPE}="${b.CONTAINER}"]:is([${er.RESOURCE}],[${er.PROP}]`),a=null==r?void 0:r.getAttribute(er.RESOURCE),n=null==r?void 0:r.getAttribute(er.PROP);if(a)return{parentResource:a,parentID:nr([a,n],!0)};let i=r&&rr(r).cfid;return n&&i?{parentResource:i,parentID:nr([i,n],!0)}:void 0})(e);i=(null==r?void 0:r.parentID)||"",s=(null==r?void 0:r.parentResource)||""}else{let t=rr(e);i=nr([s=t.cfid,t.prop],!0),n=`[${er.RESOURCE}="${s}"] ${e.tagName.toLocaleLowerCase()}[${er.TYPE}="${r}"]`}return a&&(n+=`[${er.PROP}="${a}"]`),{parentid:i,parentResource:s,selector:n,isComponent:r===Ut.COMPONENT_ITEM_TYPE||e.getAttribute(er.BEHAVIOR)===Ut.COMPONENT_ITEM_TYPE}},nr=(e,t=!1)=>{let r=e.filter((e=>!!e)).join("_");if(t&&tr.has(r))return tr.get(r);let a=`_${(e=>(Ht++,`${e||"id"}${Ht}`))()}`,n=Bt(`${r}${a}`,Bt.URL);return tr.set(r,n),n},ir=e=>{let{scrollLeft:t,scrollTop:r}=e.documentElement,a=e.querySelectorAll(`[${er.RESOURCE}],[${er.PROP}]`)||[],n=new Map;return Ht=0,tr.clear(),a.forEach((e=>{let t=(e=>{let t=e.getAttribute(null==er?void 0:er.TYPE),r=e.getAttribute(er.RESOURCE),a=e.getAttribute(er.PROP);if(!r&&!a)return;let n=e.getAttribute(er.MODEL)||"",{parentid:i,parentResource:s,selector:o,isComponent:d}=ar(e,{resource:r,type:t,prop:a});return{id:nr([r||s,a]),type:t||"",resource:r||"",prop:a||"",model:n,rect:e.getBoundingClientRect(),label:e.getAttribute(er.LABEL)||"",parentid:i,selector:o,pageYOffset:window.scrollY,isComponent:d,filter:e.getAttribute(er.FILTER)||"",content:Xt(e,t),modeltype:n}})(e);if(t){let e=n.get(t.id);if(n.set(t.id,{...t,children:(null==e?void 0:e.children)||[]}),t.parentid&&t.id!==t.parentid){let e=n.get(t.parentid);e?e.children.push(t.id):n.set(t.parentid,{children:[t.id]})}}})),{editables:n,offset:{x:t,y:r},selected:{}}},sr={viewport:{width:0,height:0},frame:{width:0,height:0},scroll:{x:0,y:0}},or=({editor:e})=>{null==e||e.updateFrameDetails({details:sr})},dr=({target:e})=>{let t=e.documentElement;sr.scroll.x=t.scrollLeft,sr.scroll.y=t.scrollTop},lr=({target:e})=>{let t=Math.max(e.document.documentElement.clientWidth||0,e.innerWidth||0),r=Math.max(e.document.documentElement.clientHeight||0,e.innerHeight||0),{width:a,height:n}=e.document.documentElement.getBoundingClientRect();sr.viewport={width:t,height:r},sr.frame={width:Math.ceil(a),height:Math.ceil(n)}},ur=({editor:e,prefix:t})=>{let r=Wt.element;t&&t!==Ut.DEFAULT_PREFIX&&Object.assign(er,Yt(t));let a=(0,Vt.debounce)((()=>{let t=ir(r);e.repaintEditables({editables:t})}),150);a(),window.removeEventListener("resize",a),window.addEventListener("resize",a),(({element:e,callback:t})=>{let r=new MutationObserver(t);r.observe(e,{attributes:!0,characterData:!0,childList:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),r.disconnect})({element:r,callback:a})},cr={edit:"adobe-ue-edit",preview:"adobe-ue-preview"},pr="application/vnd.adobe.aue.";N=function(e){return function(t,r,a){var n=a.subscribe;return a.subscribe=function(e,t,r){var i=e;if(t){var s=(null==r?void 0:r.equalityFn)||Object.is,o=e(a.getState());i=function(r){var a=e(r);if(!s(o,a)){var n=o;t(o=a,n)}},null!=r&&r.fireImmediately&&t(o,o)}return n(i)},e(t,r,a)}};var hr={},mr=function(e){var t,r=new Set,a=function(e,a){var n="function"==typeof e?e(t):e;if(!Object.is(n,t)){var i=t;t=(null!=a?a:"object"!=typeof n||null===n)?n:Object.assign({},t,n),r.forEach((function(e){return e(t,i)}))}},n=function(){return t},i={setState:a,getState:n,getInitialState:function(){return s},subscribe:function(e){return r.add(e),function(){return r.delete(e)}},destroy:function(){r.clear()}},s=t=e(a,n,i);return i},fr=function(e){return e?mr(e):mr},yr=function(e){return fr(e)};hr.createStore=fr,hr.default=yr,(hr=yr).createStore=fr,hr.default=hr;let vr=({set:e},t)=>{e((e=>({...e,editor:t})))},gr=({set:e},{mode:t})=>{e((e=>{let r=t===_.EDIT||t===_.PREVIEW;return{...e,mode:t,isInEditor:r}}))},_r=({set:e},t)=>{e((e=>({...e,prefix:t})))},Er=(0,hr.createStore)(N(((e,t)=>({mode:_.PREVIEW,isInEditor:!1,prefix:null,editor:null,setMode:gr.bind(null,{get:t,set:e}),setPrefix:_r.bind(null,{get:t,set:e}),setEditor:vr.bind(null,{get:t,set:e})})))),br=e=>e.preventDefault(),xr=()=>{var e;null===(e=window.navigation)||void 0===e||e.removeEventListener("navigate",br)},Tr=({editable:e,config:t},r=0)=>{var a;if(window.tinymce){if(Qt(),!t.toolbar){let r=e.selector&&(null===(a=document.querySelector(e.selector))||void 0===a?void 0:a.tagName);r&&["a","div"].includes(r.toLowerCase())&&Object.assign(t,{forced_root_block:r})}window.tinymce.init({...t,setup:t=>{t.on("init",(()=>{window.tinymce.activeEditor.focus(!1),(()=>{var e;null===(e=window.navigation)||void 0===e||e.addEventListener("navigate",br)})()})),t.on("keyup",(e=>"Escape"===e.key&&e.target.blur())),t.on("blur",(r=>{((e,t)=>{var r;let{editor:a}=Er.getState(),{bodyElement:n,startContent:i}=e.target,s=window.tinymce.activeEditor.getContent();null==a||a.closeRTE({editable:t,isModified:i!==s,newContent:{html:s,text:null!==(r=n.textContent)&&void 0!==r?r:""}})})(r,e),((e,t)=>{e.preventDefault(),e.stopImmediatePropagation(),t.remove(),xr(),Jt()})(r,t)}))}})}else r<3&&setTimeout((()=>Tr({editable:e,config:t},r+1)),100)},kr=(e,t,r)=>{let a=new CustomEvent(e,{bubbles:!0,detail:r}),n=t?document.querySelector(t):document.body;return null==n||n.dispatchEvent(a),!!n},wr=({selector:e,classNames:t,operation:r="toggle"})=>{let a=document.querySelector(e);if(a)for(let e of t)a.classList[r](e)},Nr=({containerSelector:e,selector:t,beforeSelector:r,refresh:a})=>{let n=t&&document.querySelector(t),i=document.querySelector(e);n&&i?((e,t,r)=>{r?document.querySelector(r).before(e):t.appendChild(e)})(n,i,r):a&&window.location.reload()},Or=()=>{document.addEventListener(Ut.EVENT_CONTENT_MOVE,(e=>{let{prefix:t}=Er.getState(),{component:r,to:a,before:n}=e.detail;Nr({containerSelector:`[${t}${$.RESOURCE}="${a}"]`,selector:`[${t}${$.RESOURCE}="${r}"]`,beforeSelector:n?`[${t}${$.RESOURCE}="${n}"]`:void 0})})),document.addEventListener(Ut.EVENT_UI_SELECT,(e=>{let t=e.target;t&&e.detail.selected&&(t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded():t.scrollIntoView({block:"nearest"}))})),document.addEventListener(Ut.EVENT_CONTENT_PATCH,(e=>{var t;let{prefix:r}=Er.getState(),{request:a,patch:n}=null==e?void 0:e.detail,i=document.querySelector(`[${r}${$.RESOURCE}="${null===(t=null==a?void 0:a.target)||void 0===t?void 0:t.resource}"]`),s=null==i?void 0:i.getAttribute(`${r}${$.PROP}`);if(i&&n.name&&s!==n.name&&(i=i.querySelector(`[${r}${$.PROP}='${n.name}']`)),!i)return void window.location.reload();let o=i.getAttribute(`${r}${$.TYPE}`);o===b.MEDIA?i.src=n.value:o===b.TEXT||o===b.RICHTEXT?i.innerHTML=n.value:window.location.reload()})),document.addEventListener(Ut.EVENT_CONTENT_REMOVE,(e=>{var t;let r=null===(t=null==e?void 0:e.detail)||void 0===t?void 0:t.resource;if(!r)return;let{prefix:a}=Er.getState(),n=document.querySelector(`[${a}${$.RESOURCE}="${r}"]`);n&&n.remove()})),document.addEventListener(Ut.EVENT_CONTENT_ADD,(()=>{window.location.reload()})),document.addEventListener(Ut.EVENT_UI_EDIT,(()=>{Cr(_.EDIT)})),document.addEventListener(Ut.EVENT_UI_PREVIEW,(()=>{Cr(_.PREVIEW)}))},Cr=e=>{let{mode:t,setMode:r}=Er.getState();wr({selector:"html",classNames:[cr[e]],operation:"add"}),t!==e&&(wr({selector:"html",classNames:[cr[t]],operation:"remove"}),r({mode:e}))},Rr={updateAppMode:Cr,getUrnMappings:()=>[...document.querySelectorAll(Ut.META_SELECTOR)].reduce(((e,{name:t,content:r})=>{let[a,n]=t.replace(Ut.URN_PREFIX,"").split(":");return{...e,[a]:n?{...e[a],[n]:r}:r}}),{}),getDocumentProperties:e=>e.reduce(((e,t)=>{var r;return{...e,[t]:null!==(r=document[t])&&void 0!==r?r:null}}),{}),getDefinitions:async()=>{let e={},t=document.querySelectorAll(`script[type^="${pr}"]`);return await Promise.all([...t].map((async({type:t,src:r,innerText:a})=>{let n=t.replace(pr,"").replace("+json",""),i=a?(e=>{try{return JSON.parse(e)}catch(e){return console.log("Cors parseDefinitions",e),null}})(a):await(async e=>{try{return await fetch(e).then((e=>e.json()))}catch(e){return console.log("Cors fetchDefinitions",e),null}})(r);e[n]=i}))),e},triggerEvent:kr,openRTE:Tr};(async()=>{let e=P({methods:Rr}),t=await e.promise;Er.getState().setEditor(t),Or();let r=(()=>{let e=document.querySelector(Ut.META_NAMESPACE);return(null==e?void 0:e.content)?`data-${e.content}-`:Ut.DEFAULT_PREFIX})();Er.getState().setPrefix(r),(()=>{let e=document.createElement("script");e.id="tiny-mce-script",e.src=Ut.RTE_URL,document.body.appendChild(e)})(),kr(Ut.EVENT_APP_INITIALIZED),ur({editor:t,prefix:r}),(({editor:e})=>{let t=window;t.document.addEventListener("scroll",(0,Vt.debounce)((({target:t})=>{dr({target:t}),or({editor:e})}),150)),t.addEventListener("resize",(0,Vt.debounce)((({target:t})=>{lr({target:t}),or({editor:e})}),150)),t.addEventListener("orientationchange",(0,Vt.debounce)((({target:r})=>{dr({target:t.document}),lr({target:r}),or({editor:e})}),150));let r=new ResizeObserver((0,Vt.debounce)((()=>{lr({target:t}),or({editor:e})}),150));r.observe(t.document.documentElement),r.observe(t.document.body),requestAnimationFrame((()=>{dr({target:t.document}),lr({target:t}),or({editor:e})}))})({editor:t}),(({editor:e})=>{document.addEventListener("click",(t=>(({event:e,editor:t})=>{let r=e.target.closest("A");r&&(e.preventDefault(),t.navigateTo({href:r.href}))})({event:t,editor:e})),{capture:!0})})({editor:t}),window.addEventListener("keydown",(({type:e,key:t,code:r,altKey:a,metaKey:n,shiftKey:i,ctrlKey:s})=>{parent.postMessage({type:Ut.USER_INPUT_RELAY_MESSAGE,value:{type:e,key:t,code:r,altKey:a,metaKey:n,shiftKey:i,ctrlKey:s}},"*")})),(e=>{Er.subscribe((e=>[e.mode]),(([t],[r])=>{t&&t!==r&&e(t)}))})((e=>{var t;let r={[_.PREVIEW]:Qt,[_.EDIT]:Jt};null===(t=r[e])||void 0===t||t.call(r)})),t.trackCorsVersion({version:"2.2.15"})})()})();